/**
 * Basic and image file upload javascript functions file for channel functionality 
 *
 * This file script is used for basic channel operations like ajax, etc. and image process operations like cropping, uploading, etc.
 *
 * @category   Apptha
 * @package    Com_Contushdvideoshare
 * @version    3.8
 * @author     Apptha Team <developers@contus.in>
 * @copyright  Copyright (C) 2015 Apptha. All rights reserved.
 * @license    GNU General Public License http://www.gnu.org/copyleft/gpl.html
 */

function uploadImage(e,t,r,n){var o=baseurl+"index.php?option=com_contushdvideoshare";if("subscriber"==n)var i=subscriberId;if("cover"==t)if("channel"==n)var a=o+"&task=imageUpload&uploadType="+t+"&ui="+r;else var a=o+"&task=saveSubscriperImage&uploadType="+t+"&ui="+r+"&subid="+i;else{var s=jQuery(".bannerContainer")[0].offsetWidth;if("channel"==n)var a=o+"&task=imageUpload&uploadType="+t+"&ui="+r+"&bannerWidth="+s;else var a=o+"&task=saveSubscriperImage&uploadType="+t+"&ui="+r+"&bannerWidth="+s+"&subid="+i}jQuery.ajax({xhr:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0>t)var r=new XMLHttpRequest;else var r=new window.XMLHttpRequest;return 0>t&&(r.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;jQuery(".loadingBar").show(),jQuery(".loadingBar").focus(),jQuery(".loadingBar").css("width",t+"%")}},!1),r.addEventListener("progress",function(e){if(e.lengthComputable){e.loaded/e.total}},!1)),r},url:a,type:"POST",data:e,success:function(e){jQuery(".loadingBar").show(),jQuery(".loadingBar").css("width","0%");var t,r,o,i,a,s=jQuery.parseJSON(e);if(t=baseurl+"images/channel/banner/"+s.imageName,o=s.imageHeight,r=s.imageWidth,i=s.errormsg,a=s.uploadType,"channel"==n&&"404"==s.errmsg&&"true"==i){var u;return u=baseurl,void(window.location=u)}return"true"==i?(jQuery(".fileContent").val(""),void alert(s.errmsg)):("cover"==a&&"false"==i&&(jQuery(".cropContainer").css("width",r),jQuery(".cropContainer").css("height",o),jQuery(".cropContainer").css("background-image","url("+t+")"),jQuery(".bannerContainer").css("background","ghostwhite"),jQuery(".dragContainer").hide(),jQuery(".profileDragContainer").hide(),jQuery(".cropContainer").show(),jQuery(".dragButtonContainer").hide(),jQuery(".saveButtonContainer").show(),jQuery(".channel_dragreposition").show(),jQuery(".fileContent").val("")),"profile"==a&&"false"==i&&(jQuery(".profileDragContainer").css("width",r),jQuery(".profileDragContainer").css("height",o),jQuery(".profileDragContainer").css("background-image","url("+t+")"),jQuery(".bannerContainer").css("background","ghostwhite"),jQuery(".dragContainer").hide(),jQuery(".cropContainer").hide(),jQuery(".saveButtonContainer").hide(),jQuery(".profileDragContainer").show(),jQuery(".dragButtonContainer").show(),jQuery(".dragBox").show(),"channel"==n&&jQuery(".channel_dragreposition").show(),jQuery(".fileContent").val("")),void jQuery(".bannerContainer").css("height","250px"))},cache:!1,contentType:!1,processData:!1})}function cropImage(e,t,r,n,o){var i=baseurl+"index.php?option=com_contushdvideoshare&task=croppingCoverImage";jQuery.ajax({xhr:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0>t)var r=new XMLHttpRequest;else var r=new window.XMLHttpRequest;return 0>t&&(r.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;jQuery(".loadingBar").show(),jQuery(".loadingBar").focus(),jQuery(".loadingBar").css("width",t+"%")}},!1),r.addEventListener("progress",function(e){if(e.lengthComputable){e.loaded/e.total}},!1)),r},url:i,type:"POST",data:"&cx="+e+"&cy="+t+"&cw="+r+"&ch="+n,success:function(e){var t=jQuery.parseJSON(e);if("channel"==o){errorMsg=t.errormsg;try{if("404"==t.errmsg&&"true"==errorMsg){var r;return r=baseurl,void(window.location=r)}}catch(n){}}var i;i=baseurl+"images/channel/banner/"+t.uploadType+"/"+t.image,"profile"==t.uploadType&&jQuery(".profileImages").attr("src",i),"cover"==t.uploadType&&jQuery(".coverImages").attr("src",i),jQuery(".fileContent").val(""),jQuery(".dragBox").css("top","0px"),jQuery(".dragBox").css("left","0px"),jQuery(".cropContainer").css("top","0px"),jQuery(".cropContainer").css("left","0px"),jQuery(".profileDragContainer").css("top","0px"),jQuery(".profileDragContainer").css("left","0px"),jQuery(".profileUpload").hide(),jQuery(".coverUpload").hide(),jQuery(".cropContainer").hide(),jQuery(".dragContainer").hide(),jQuery(".dragBox").hide(),jQuery(".profileDragContainer").hide(),jQuery(".saveButtonContainer").hide(),jQuery(".channel_dragreposition").hide(),jQuery(".loadingBar").hide(),jQuery(".loadingBar").css("width","0%"),jQuery(".coverContainer").show(),jQuery(".profileContainer").show(),jQuery(".fileContent").val("")}})}function channelMyVideos(e,t,r,n){var o,i,a,s;if("subscriber"==n)var u=subscriberId;"myVideosButton"==e?"subscriber"==n&&(o=baseurl+"index.php?option=com_contushdvideoshare&task=subscripeMyVideos&tmpl=component",a="&subid="+u,document.getElementById("myVideosButton")&&(document.getElementById("myVideosButton").className="myVideosButton active",document.getElementById("mySubscriptionButton")&&(document.getElementById("mySubscriptionButton").className="mySubscriptionButton"),document.getElementById("aboutButton")&&(document.getElementById("aboutButton").className="aboutButton"))):"searchButton"==e?(i=document.getElementsByClassName("search"),i=i[0].value,"channel"==n?(o=baseurl+"index.php?option=com_contushdvideoshare&task=channelMyVideos&tmpl=component",a="&videoSearch="+i):(o=baseurl+"index.php?option=com_contushdvideoshare&task=subscripeMyVideos&tmpl=component",a="&videoSearch="+i+"&subid="+u)):"saveDescription"==e?(s=jQuery(".channelDescription").val(),userName=jQuery(".userName").val(),"channel"==n?(o=baseurl+"index.php?option=com_contushdvideoshare&task=channelDescription&tmpl=component",a="&channelDescription="+s+"&userName="+userName):(o=baseurl+"index.php?option=com_contushdvideoshare&task=saveSubscriperDescription&tmpl=component",a="&channelDescription="+s+"&subid="+u+"&userName="+userName)):"browseChannelButton"==e&&(o=baseurl+"index.php?option=com_contushdvideoshare&task=subscriperDetails&tmpl=component",a=""),"searchChannelButton"==e&&(i=jQuery(".search").val(),o=baseurl+"index.php?option=com_contushdvideoshare&task=subscriperDetails&tmpl=component",a="&videoSearch="+i),"subscripeLinkButton"==e&&(o=baseurl+"index.php?option=com_contushdvideoshare&task=saveSubscriper&tmpl=component",a="&sid="+t),"subButton"==e&&(o=baseurl+"index.php?option=com_contushdvideoshare&task=saveSubscriper&tmpl=component",a="&sid="+t),"mySubscriptionButton"==e&&("channel"==n?(o=baseurl+"index.php?option=com_contushdvideoshare&task=mySubscriperDetails&tmpl=component",a="&sid="+t,document.getElementById("ch_mySubscriptionButton")&&(document.getElementById("ch_mySubscriptionButton").className="mySubscriptionButton active",document.getElementById("ch_aboutButton")&&(document.getElementById("ch_aboutButton").className="aboutButton"))):(o=baseurl+"index.php?option=com_contushdvideoshare&task=getMySubscriperDetails&tmpl=component",a="&subid="+u+"&sid="+t,document.getElementById("mySubscriptionButton")&&(document.getElementById("mySubscriptionButton").className="mySubscriptionButton active",document.getElementById("myVideosButton")&&(document.getElementById("myVideosButton").className="myVideosButton"),document.getElementById("aboutButton")&&(document.getElementById("aboutButton").className="aboutButton")))),"closeSubscripe"==e&&("channel"==n?(o=baseurl+"index.php?option=com_contushdvideoshare&task=closeSubscripe&tmpl=component",a="&msid="+t):(o=baseurl+"index.php?option=com_contushdvideoshare&task=closeSubscripeDetail&tmpl=component",a="&subid="+u+"&msid="+t)),"deleteNotification"==e&&(o=baseurl+"index.php?option=com_contushdvideoshare&task=deleteNotification&tmpl=component",a=""),"subDeleteButton"==e&&(o=baseurl+"index.php?option=com_contushdvideoshare&task=deleteNotification&tmpl=component",a="&delId="+t),jQuery.ajax({url:o,type:"POST",data:a,success:function(t){if("channel"==n)try{var o=jQuery.parseJSON(t);if(errorMsg=o.errormsg,"404"==o.errmsg&&"true"==errorMsg){var i;return i=baseurl,window.location=i,!1}}catch(a){}if("saveDescription"==e){try{if("subscriber"==n)var o=jQuery.parseJSON(t);if(errorMsg=o.errormsg,"true"==errorMsg)return alert(o.errmsg),jQuery(".userName").focus(),!1;alert(o.errmsg)}catch(a){}return jQuery(".aboutButton").css("left","10px"),jQuery(".authorHeading").text(jQuery(".userName").val()),jQuery(".aboutButton").css("background","rgb(250, 118, 87) !important"),!1}if("deleteNotification"==e)return jQuery(".notifi").hide(),jQuery(".notificationContainer").hide(),jQuery(".notificationContainers").hide(),jQuery(".myVideosButton").click(),!1;if("subscripeLinkButton"==e){var s;return"error"==t?!1:(jQuery(".subscripeContainer").html(""),jQuery(".subscripeContainer").html(t),jQuery(".subscripRow").length,s=Number(jQuery(".subscriptionCount").text()),jQuery(".subscriptionCount").text(s+1),!1)}if("subDeleteButton"==e)return"error"==t?!1:(s=Number(jQuery(".ncount").text()),jQuery(".ncount").text(s-1),countValue=s-1,delIdValue=r.parent().parent().attr("id"),delClassValue=r.parent().parent().attr("class"),jQuery(".notificationLis#"+delIdValue).hide(),jQuery(".notificationLi#"+delIdValue).hide(),5>s&&jQuery(".seeMoreLink").hide(),0!=countValue?"notificationLis"==delClassValue&&jQuery(".notificationContainers").show():(jQuery(".notificationContainers").hide(),jQuery(".notificationContainer").hide(),jQuery(".notifi").hide()),!1);if("subButton"==e){var s;if("error"==t)return!1;var u,c;return u=jQuery(".mysubscriptionContainer").attr("style"),c=jQuery(".subscripeContainer").attr("style"),-1!=u.indexOf("block")?(s=Number(jQuery(".subscriptionCount").text()),jQuery(".subscriptionCount").text(s+1),r.hide(),jQuery(".mySubscriptionButton").click(),notificationClassValue=r.parent().parent().attr("class"),void("notificationLis"==notificationClassValue&&jQuery(".notificationContainers").show())):-1!=c.indexOf("block")?(jQuery(".subscripeContainer").html(""),jQuery(".subscripeContainer").html(t),s=Number(jQuery(".subscriptionCount").text()),jQuery(".subscriptionCount").text(s+1),void r.hide()):(s=Number(jQuery(".subscriptionCount").text()),jQuery(".subscriptionCount").text(s+1),notificationIdValue=r.parent().parent().attr("id"),notificationClassValue=r.parent().parent().attr("class"),jQuery("#"+notificationIdValue+" .subButton").hide(),void("notificationLis"==notificationClassValue&&jQuery(".notificationContainers").show()))}if("closeSubscripe"==e){var s;return"error"==t?void 0:(jQuery(".mysubscriptionRow").html(""),jQuery(".mysubscriptionRow").html(t),s=Number(jQuery(".subscriptionCount").text()),void jQuery(".subscriptionCount").text(s-1))}return"browseChannelButton"==e||"searchChannelButton"==e?("channel"==n&&(jQuery(".search").val(""),jQuery("#dynamicplacholder").attr("placeholder","Search Channel")),jQuery(".subscripeContainer").html(""),jQuery(".subscripeContainer").html(t),void jQuery(".subscripRow").length):"mySubscriptionButton"==e?(jQuery(".mysubscriptionRow").html(""),jQuery(".mysubscriptionRow").html(t),!1):("searchButton"!=e?(jQuery(".search").val(""),jQuery("."+e).css("left","10px"),jQuery("."+e).css("background","rgb(250, 118, 87)")):(jQuery(".channelMenuContainer p").css("left","0px"),jQuery(".channelMenuContainer p").css("background","rgb(252, 193, 179)")),jQuery(".videoContent").html(""),jQuery(".videoContent").html(t),"channel"==n&&jQuery("#dynamicplacholder").attr("placeholder","Search"),!1)}})}